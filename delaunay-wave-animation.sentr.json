{"name":"Super Evil New Tab Redux Configuration","data":{"html":"<!--\n  Johan Karlsson, 2021\n  https://twitter.com/DonKarlssonSan\n  MIT License, see Details View\n  https://codepen.io/DonKarlssonSan/pen/bGgKbJK\n  \n  https://en.wikipedia.org/wiki/Delaunay_triangulation\n  \n  https://en.wikipedia.org/wiki/Bowyer%E2%80%93Watson_algorithm\n  \n  https://en.wikipedia.org/wiki/Circumscribed_circle\n-->\n\n<canvas id=\"canvas\" title=\"Click to generate new pattern\"></canvas>","css":"body, html {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n  cursor: pointer;\n}","javascript":"\"use strict\";class Vector{constructor(t,e){this.x=t,this.y=e}add(t){return new Vector(this.x+t.x,this.y+t.y)}addTo(t){this.x+=t.x,this.y+=t.y}sub(t){return new Vector(this.x-t.x,this.y-t.y)}subFrom(t){this.x-=t.x,this.y-=t.y}mult(t){return new Vector(this.x*t,this.y*t)}multTo(t){return this.x*=t,this.y*=t,this}div(t){return new Vector(this.x/t,this.y/t)}setAngle(t){var e=this.getLength();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}setLength(t){var e=this.getAngle();return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}getAngle(){return Math.atan2(this.y,this.x)}getLength(){return Math.hypot(this.x,this.y)}getLengthSq(){return this.x*this.x+this.y*this.y}distanceTo(t){return this.sub(t).getLength()}copy(){return new Vector(this.x,this.y)}equals(t){return this.x==t.x&&this.y==t.y}rotate(t){return new Vector(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}rotateAround(t,e){let s=(this.x-t.x)*Math.cos(e)-(t.y-this.y)*Math.sin(e)+t.x,i=(t.y-this.y)*Math.cos(e)+(this.x-t.x)*Math.sin(e)+t.y;return new Vector(s,i)}lerp(t,e){let s=t.sub(this).mult(e);return this.add(s)}lerpTo(t,e){let s=t.sub(this).mult(e);this.addTo(s)}moveTowards(t,e){let s=t.sub(this).setLength(e);return this.add(s)}toString(){return`${this.x},${this.y}`}}class Triangle{constructor(t,e,s){this.a=t,this.b=e,this.c=s}vertexes(){return[this.a,this.b,this.c]}edges(){return[[this.a,this.b],[this.b,this.c],[this.c,this.a]]}sharesAVertexWith(t){for(let e=0;e<3;e++)for(let s=0;s<3;s++){let i=this.vertexes()[e],h=t.vertexes()[s];if(i.equals(h))return!0}return!1}hasEdge(t){for(let e=0;e<3;e++){let s=this.edges()[e];if(s[0].equals(t[0])&&s[1].equals(t[1])||s[1].equals(t[0])&&s[0].equals(t[1]))return!0}return!1}get circumcenter(){if(!this._circumcenter){let t=2*(this.a.x*(this.b.y-this.c.y)+this.b.x*(this.c.y-this.a.y)+this.c.x*(this.a.y-this.b.y)),e=1/t*((this.a.x*this.a.x+this.a.y*this.a.y)*(this.b.y-this.c.y)+(this.b.x*this.b.x+this.b.y*this.b.y)*(this.c.y-this.a.y)+(this.c.x*this.c.x+this.c.y*this.c.y)*(this.a.y-this.b.y)),s=1/t*((this.a.x*this.a.x+this.a.y*this.a.y)*(this.c.x-this.b.x)+(this.b.x*this.b.x+this.b.y*this.b.y)*(this.a.x-this.c.x)+(this.c.x*this.c.x+this.c.y*this.c.y)*(this.b.x-this.a.x));this._circumcenter=new Vector(e,s)}return this._circumcenter}get centroid(){return this._centroid||(this._centroid=this.a.add(this.b).add(this.c).div(3)),this._centroid}get circumradius(){return this._circumradius||(this._circumradius=this.circumcenter().sub(this.a).getLength()),this._circumradius}pointIsInsideCircumcircle(t){let e=this.circumcenter.sub(this.a).getLength();return t.sub(this.circumcenter).getLength()<e}draw(t){let e=this.centroid.sub(center).getLength()/w*2,s=.48*(Math.sin(t/1800+e)+1),i=this.a.lerp(this.centroid,s),h=this.b.lerp(this.centroid,s),r=this.c.lerp(this.centroid,s);ctx.beginPath(),ctx.lineTo(i.x,i.y),ctx.lineTo(h.x,h.y),ctx.lineTo(r.x,r.y),ctx.closePath(),ctx.fill(),ctx.stroke()}}let canvas,ctx,w,h,triangles,center;function setup(){canvas=document.querySelector(\"#canvas\"),ctx=canvas.getContext(\"2d\"),window.addEventListener(\"resize\",()=>{reset(),setupTriangles()}),canvas.addEventListener(\"click\",setupTriangles),reset(),setupTriangles()}function setupTriangles(){let t=new Triangle(new Vector(10*-w,10*h),new Vector(10*w,10*h),new Vector(w/2,10*-h)),e=getRandomPoints();triangles=bowyerWatson(t,e)}function reset(){w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight,center=new Vector(w/2,h/2)}function getRandomPoints(){let t=[new Vector(-50,-50),new Vector(-50,h+50),new Vector(w+50,-50),new Vector(w+50,h+50)],e=5e3*Math.random()+300,s=w*h/e;for(let e=0;e<s;e++)t.push(new Vector(Math.random()*(w+100)-50,Math.random()*(h+100)-50));return t}function bowyerWatson(t,e){let s=[];s.push(t),e.forEach(t=>{let e=[];s.forEach(s=>{s.pointIsInsideCircumcircle(t)&&e.push(s)});let i=[];e.forEach(t=>{t.edges().forEach(s=>{let h=!1;e.forEach(e=>{t!==e&&e.hasEdge(s)&&(h=!0)}),h||i.push(s)})}),e.forEach(t=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}),i.forEach(e=>{let i=new Triangle(e[0],e[1],t);s.push(i)})});let i=s.length;for(;i--;){let e=s[i];if(e.sharesAVertexWith(t)){let t=s.indexOf(e);t>-1&&s.splice(t,1)}}return s}function draw(t){requestAnimationFrame(draw),ctx.fillStyle=\"black\",ctx.fillRect(0,0,w,h),ctx.strokeStyle=\"white\",ctx.fillStyle=\"white\",ctx.lineWidth=2,triangles.forEach(e=>e.draw(t))}setup(),draw(performance.now());"}}